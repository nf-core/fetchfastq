nextflow_workflow {

    name "Test Workflow PIPELINE_INITIALISATION"
    script "subworkflows/local/utils_nfcore_fetchngs_pipeline/main.nf"
    workflow "PIPELINE_INITIALISATION"
    tag "UTILS_NFCORE_FETCHNGS_PIPELINE"

    test("Should run") {

        when {
            workflow {
                """
                version             = false
                validate_params     = false
                monochrome_logs     = false
                nextflow_cli_args   = []
                outdir              = 'results'
                ena_metadata_fields = null

                input[0] = version
                input[1] = validate_params
                input[2] = monochrome_logs
                input[3] = nextflow_cli_args
                input[4] = outdir
                input[5] = 'https://raw.githubusercontent.com/nf-core/test-datasets/2732b911c57e607fa7aea5ba0c3d91b25bafb662/testdata/v1.12.0/sra_ids_test.csv'
                input[6] = ena_metadata_fields
                """
            }
        }

        then {
            assertAll(
                { assert workflow.success }
            )
        }
    }
}
